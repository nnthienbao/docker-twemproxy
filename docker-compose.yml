version: '3.9'

services:
  redis_1:
    image: redis:3
    ports:
      - "7001:7001"
    volumes:
      - ./docker-data/redis_1.conf:/usr/local/etc/redis/redis.conf
    command: redis-server /usr/local/etc/redis/redis.conf
  redis_2:
    image: redis:3
    ports:
      - "7002:7002"
    volumes:
      - ./docker-data/redis_2.conf:/usr/local/etc/redis/redis.conf
    command: redis-server /usr/local/etc/redis/redis.conf
  redis_3:
    image: redis:3
    ports:
      - "7003:7003"
    volumes:
      - ./docker-data/redis_3.conf:/usr/local/etc/redis/redis.conf
    command: redis-server /usr/local/etc/redis/redis.conf
  twemproxy:
    image: baonnt/twemproxy
    ports:
      - "22121:22121"
      - "22222:22222"
    volumes:
      - ./twemproxy-data/nutcracker.yml:/etc/nutcracker.conf
      - /var/log/nutcracker/nutcracker.log:/var/log/nutcracker/nutcracker.log
    command: nutcracker -c /etc/nutcracker.conf